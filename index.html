<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
</body>
<script>
    c = {
        name: 'c',
    }
    b = {
        name: 'b',
        child: c
    }
    a = {
        name: 'a',
        child: b
    }

    function reverse(node) {
        if (!node.child) {
            return node;
        } else {
            let child = node.child;
            delete node.child;

            if (child.child) { // reduce (1) unnecessary recursive call -- so efficient!
                reverse(child).child = node;
                return node;
            } else {
                child.child = node;
                return node;
            }
        }
    }

    function collatz(n) {
        if (n === 1) {
            return 0
        } else {
            if (n % 2 === 0) {
                return (1 + collatz(n / 2))
            } else {
                return (1 + collatz(3*n + 1))
            }
        }
    }

    function sumRange(n) {
        if (n === 1) {
            return n
        } else {
            return n += sumRange(n - 1)
        }
    }

    function power(n, x) {
        if (x < 0) {
            return power(n, x + 1) / n
        } else if (x === 0) {
            return 1
        } else if (x === 1) {
            return n
        } else {
            return n *= power(n, x - 1)
        }
    }

    function factorial(n) {
        if (n === 1) {
            return n
        } else {
            return n *= factorial(n - 1)
        }
    }

    function productOfArray(array) {
        if (array.length <= 0) {
            return 0
        } else if (array.length === 1) {
            return array[0]
        } else {
            let n = array.pop()
            return n *= productOfArray(array)
        }
    }

    var test = {
        data: {
            info: {
                stuff: {
                    thing: {
                        moreStuff: {
                            magicNumber: 44,
                            something: 'foo2'
                        }
                    }
                }
            }
        }
    }

    function contains(object, target) {
        for (let prop in object) {
            if (object[prop] === target) {
                return true;
            } else if (typeof object[prop] === 'object') {
                return contains(object[prop], target)
            }
        }
        return false;
    }

    function totalN(array) {
        let total = 0;

        array.forEach((el) => {
            if (typeof el === 'number') {
                total += 1;}
            else if (typeof el === 'object') {
                total += totalN(el)
            }
        })
        return total;
    }

    function sumSquares(array) {
        let sum = 0;

        array.forEach((el) => {
            if (typeof el === 'number') {
                sum += (el**2)
            } else if (typeof el === 'object') {
                sum += sumSquares(el)
            }
        })
        return sum;
    }

    function replicate(n, reps) {
        let arr = []

        if (reps <= 1) {
            return [n]
        } else {
            arr = replicate(n, reps - 1)
            arr.push(n)
            return arr
        }
    }

    function fibonacci(n) {
        if (n === 1) {
            return 0
        } else if (n === 2) {
            return 1
        } else {
            return fibonacci(n - 1) + fibonacci(n - 2)
        }
    }

    function triple(arr) {
        if (arr.length <= 1) {
            return arr
        } else if (arr.length === 2) {
            let left = arr[0]
            let right = arr[1]
            arr = []

            if (arr[0] < arr[1]) {
                arr.push(left)
                arr.push(right)
            } else {
                arr.push(right)
                arr.push(left)
            }
            return arr
        } else if (arr.length > 2) {
            let sl = arr.length / 3

            let a = triple(arr.slice(0, sl))
            let b = triple(arr.slice(sl, sl*2))
            let c = triple(arr.slice(sl*2, sl*3))
            console.log(a,b,c)

            arr = []

            while (c.length > 0) {
                while (b.length > 0) {
                    while (a.length > 0) {
                        while (b.length > 0 && c.length > 0) {
                            while (a[0] < b[0] && a[0] < c[0]) {
                                console.log('a', a[0])
                                arr.push(a[0])
                                a = a.slice(1)
                            }
                            if (b[0] < c[0]) {
                                console.log('b', b[0])
                                arr.push(b[0])
                                b = b.slice(1)
                            } else {
                                console.log('c', c[0])
                                arr.push(c[0])
                                c = c.slice(1)
                            }
                            while (a[0] > b[0] && a[0] > c[0]) {
                                while (b[0] > c[0]) {
                                    console.log('c2', c[0])
                                    arr.push(c[0])
                                    c = c.slice(1)
                                }
                                console.log('b2', b[0])
                                arr.push(b[0])
                                b = b.slice(1)
                            }
                        }
                        while (a.length > 0 && (b.length > 0 || c.length > 0)) {
                            if (b.length > 0) {
                                while (a[0] > b[0]) {
                                    console.log('b3', b[0])
                                    arr.push(b[0])
                                    b = b.slice(1)
                                }
                                console.log('a2', a[0])
                                arr.push(a[0])
                                a = a.slice(1)
                            } else if (c.length > 0) {
                                while (a[0] > c[0]) {
                                    console.log('c3', c[0])
                                    arr.push(c[0])
                                    c = c.slice(1)
                                }
                                console.log('a3', a[0])
                                arr.push(a[0])
                                a = a.slice(1)
                            }
                        }
                        while (a.length > 0) {
                            console.log('a0')
                            arr.push(a[0])
                            a = a.slice(1)
                        }
                    }
                    while (b[0] > c[0]) {
                        console.log('c4', c[0])
                        arr.push(c[0])
                        c = c.slice(1)
                    }
                    if (b.length > 0) {
                        console.log('b4', b[0])
                        arr.push(b[0])
                        b = b.slice(1)
                    }
                }
                if (c.length > 0) {
                    console.log('c5', c[0])
                    arr.push(c[0])
                    c = c.slice(1)
                }
            }
            return arr
        }
    }

    function sort(arr) {
        if (arr.length === 1) {
            return arr
        } else {
            let sl = arr.length/2

            let left = sort(arr.slice(0, sl))
            let right = sort(arr.slice(sl))

            arr = []
            while (left.length > 0) {
                while (left[0] > right[0]) {
                    arr.push(right[0])
                    right = right.slice(1)
                }
                arr.push(left[0])
                left = left.slice(1)
            }
            if (right.length > 0) {
                right.forEach((el) => {
                    arr.push(el)
                })
            }
            // left.reverse() -- this way is probably more resource hungry?
            // right.reverse()
            // while (left.length > 0) {
            //     if (right.length === 0 ){
            //         left.forEach((el) => {
            //             arr.push(left.pop())
            //         })
            //     } else {
            //         left[left.length - 1] < right[right.length - 1] ? arr.push(left.pop()) : arr.push(right.pop())
            //     }
            // }
            // while (right.length > 0) { // left half empty but right half not? right must necessarily be sorted, push them in one by one until empty
            //     arr.push(right.pop())
            // }
            return arr
        }
    }

    function find(array, target) {
        if (array.length === 1) {
            if (array[0] === target) {
                return true
            } else {
                return false
            }
        } else {
            let sl = array.length/2

            let left = find(array.slice(0, sl), target)

            if (left) {
                return true
            } else {
                let right = find(array.slice(sl), target)
                if (right) {
                    return true
                }
            }
            return false
        }
    }

    // function insertForUnsorted(array, target) {
    //     if (array.length === 1) {
    //         if (array[0] >= target) {
    //             console.log('INSERTED: ', target)
    //             console.log('a', array[0])
    //             array.unshift(target)
    //             console.log(array)
    //             return array
    //         } else {
    //             console.log('targetB', target)
    //             console.log('b', array)
    //             return array
    //         }
    //     } else {
    //         array = sort(array)
    //         console.log('sorted', array)
    //
    //         let sl = array.length/2
    //
    //         let newArray = []
    //
    //         let left = (array.slice(0, sl))
    //         let lenL = left.length
    //
    //         console.log('leftPre',left)
    //         left = insertForUnsorted(left, target)
    //
    //         if (left.length > 1 && (lenL !== left.length)) {
    //             console.log('left+',left)
    //             left.forEach((el) => {
    //                 newArray.push(el)
    //             })
    //             array.slice(sl).forEach((el) => {
    //                 newArray.push(el)
    //             })
    //             return newArray
    //         } else {
    //             left.forEach((el) => {
    //                 newArray.push(el)
    //             })
    //
    //             let right = array.slice(sl)
    //             let lenR = right.length
    //
    //             console.log('rightPre',right)
    //             right = insertForUnsorted(array.slice(sl), target)
    //
    //             if (right.length > 1 && (lenR !== right.length)) {
    //                 console.log('right+',right)
    //                 right.forEach((el) => {
    //                     newArray.push(el)
    //                 })
    //                 return newArray
    //             } else {
    //                 right.forEach((el) => {
    //                     newArray.push(el)
    //                 })
    //                 console.log('nofind', newArray)
    //                 return newArray
    //             }
    //         }
    //     }
    // }

    function insertForSorted(array, target) {
        let len = array.length

        array = insert(array, target)

        if (len < array.length) {
            return array
        } else {
            array.push(target)
            return array
        }
    }
    function insert(array, target) {
        if (array.length === 1) {
            if (array[0] >= target) {
                console.log('INSERTED: ', target)
                console.log('a', array[0])
                array.unshift(target)
                console.log(array)
                return array
            } else {
                console.log('targetB', target)
                console.log('b', array)
                return array
            }
        } else {
            console.log('array', array)

            let sl = array.length/2

            let newArray = []

            let left = (array.slice(0, sl))
            let lenL = left.length

            console.log('leftPre',left)
            left = insert(left, target)

            if (left.length > 1 && (lenL !== left.length)) {
                console.log('left+',left)
                left.forEach((el) => {
                    newArray.push(el)
                })
                array.slice(sl).forEach((el) => {
                    newArray.push(el)
                })
                return newArray
            } else {
                left.forEach((el) => {
                    newArray.push(el)
                })

                let right = array.slice(sl)
                let lenR = right.length

                console.log('rightPre',right)
                right = insert(right, target)

                if (right.length > 1 && (lenR !== right.length)) {
                    console.log('right+',right)
                    right.forEach((el) => {
                        newArray.push(el)
                    })
                    return newArray
                } else {
                    right.forEach((el) => {
                        newArray.push(el)
                    })
                    console.log('nofind', newArray)
                    return newArray
                }
            }
        }
    }

    function actualBinaryInsert(array, target) {
        if (array.length === 1) {
            if (array[0] <= target) {
                array.push(target)
                return array
            } else {
                array.unshift(target)
                return array
            }
        }
        let arr = []

        let left = 0
        let right = array.length
        let mid = (right - left)/2

        if (array[mid] > target) {
            arr = [...actualBinaryInsert(array.slice(left,mid), target)]
            arr.push(...array.slice(mid))
        } else {
            arr = [...actualBinaryInsert(array.slice(mid), target)]
            arr.unshift(...array.slice(left,mid))
        }
        return arr
    }


</script>
</html>