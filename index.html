<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
</body>
<script>
    c = {
        name: 'c',
    }
    b = {
        name: 'b',
        child: c
    }
    a = {
        name: 'a',
        child: b
    }

    function reverse(node) {
        if (!node.child) {
            return node;
        } else {
            let child = node.child;
            delete node.child;

            if (child.child) { // reduce (1) unnecessary recursive call -- so efficient!
                reverse(child).child = node;
                return node;
            } else {
                child.child = node;
                return node;
            }
        }
    }

    function collatz(n) {
        if (n === 1) {
            return 0
        } else {
            if (n % 2 === 0) {
                return (1 + collatz(n / 2))
            } else {
                return (1 + collatz(3*n + 1))
            }
        }
    }

    function sumRange(n) {
        if (n === 1) {
            return n
        } else {
            return n += sumRange(n - 1)
        }
    }

    function power(n, x) {
        if (x < 0) {
            return power(n, x + 1) / n
        } else if (x === 0) {
            return 1
        } else if (x === 1) {
            return n
        } else {
            return n *= power(n, x - 1)
        }
    }

    function factorial(n) {
        if (n === 1) {
            return n
        } else {
            return n *= factorial(n - 1)
        }
    }

    function productOfArray(array) {
        if (array.length <= 0) {
            return 0
        } else if (array.length === 1) {
            return array[0]
        } else {
            let n = array.pop()
            return n *= productOfArray(array)
        }
    }

    var test = {
        data: {
            info: {
                stuff: {
                    thing: {
                        moreStuff: {
                            magicNumber: 44,
                            something: 'foo2'
                        }
                    }
                }
            }
        }
    }

    function contains(object, target) {
        for (let prop in object) {
            if (object[prop] === target) {
                return true;
            } else if (typeof object[prop] === 'object') {
                return contains(object[prop], target)
            }
        }
        return false;
    }

    function totalN(array) {
        let total = 0;

        array.forEach((el) => {
            if (typeof el === 'number') {
                total += 1;}
            else if (typeof el === 'object') {
                total += totalN(el)
            }
        })
        return total;
    }

    function sumSquares(array) {
        let sum = 0;

        array.forEach((el) => {
            if (typeof el === 'number') {
                sum += (el**2)
            } else if (typeof el === 'object') {
                sum += sumSquares(el)
            }
        })
        return sum;
    }

    function replicate(n, reps) {
        let arr = []

        if (reps <= 1) {
            return [n]
        } else {
            arr = replicate(n, reps - 1)
            arr.push(n)
            return arr
        }
    }

    function fibonacci(n) {
        if (n === 1) {
            return 0
        } else if (n === 2) {
            return 1
        } else {
            return fibonacci(n - 1) + fibonacci(n - 2)
        }
    }

    // function quadSort(arr) {
    //     if (arr.length === 1) {
    //         return arr
    //     } else {
    //         let sl = arr.length / 4
    //
    //         let nw = sort(arr.slice(0, sl))
    //         let ne = sort(arr.slice(sl, sl * 2))
    //         let sw = sort(arr.slice(sl * 2, sl * 3))
    //         let se = sort(arr.slice(sl * 3, sl * 4))
    //
    //         arr = []
    //         while (se.length > 0) {
    //             while(sw.length > 0) {
    //                 while(ne.length > 0) {
    //                     while(nw.length > 0) {
    //                     })
    //
    //                 })
    //             }
    //         }
    //         // while (nw.length > 0) {
    //         //     while (ne.length > 0) {
    //         //         while (sw.length > 0) {
    //         //             while (sw[0] > se[0]) {
    //         //                 continue
    //         //             }
    //         //             arr.push(sw[0])
    //         //             sw = sw.slice(1)
    //         //         }
    //         //         while (ne[0] > sw[0]) {
    //         //             while (ne[0] > se[0]) {
    //         //                 continue
    //         //             }
    //         //             arr.push(ne[0])
    //         //             ne = nw.slice(1)
    //         //             continue
    //         //         }
    //         //         arr.push(ne[0])
    //         //         ne = ne.slice(1)
    //         //     }
    //         //     while (nw[0] > ne[0]) {
    //         //         while (nw[0] > sw[0]) {
    //         //             while (nw[0] > se[0]) {
    //         //                 continue
    //         //             }
    //         //             arr.push(nw[0])
    //         //             nw = nw.slice(1)
    //         //             continue
    //         //         }
    //         //         arr.push(nw[0])
    //         //         nw = nw.slice(1)
    //         //         continue
    //         //     }
    //         //     arr.push(nw[0])
    //         //     nw = nw.slice(1)
    //         // }
    //         // if (ne.length > 0) {
    //         //     ne.forEach((el) => {
    //         //         arr.push(el)
    //         //     })
    //         // }
    //         // if (sw.length > 0) {
    //         //     sw.forEach((el) => {
    //         //         arr.push(el)
    //         //     })
    //         // }
    //         // if (se.length > 0) {
    //         //     se.forEach((el) => {
    //         //         arr.push(el)
    //         //     })
    //         // }
    //         // return arr
    //     }
    // }

    function triple(arr) {
        if (arr.length <= 1) {
            return arr
        } else if (arr.length === 2) {
            let left = arr[0]
            let right = arr[1]
            arr = []

            if (arr[0] < arr[1]) {
                arr.push(left)
                arr.push(right)
            } else {
                arr.push(right)
                arr.push(left)
            }
            return arr
        } else if (arr.length > 2) {
            let sl = arr.length / 3

            let a = sort(arr.slice(0, sl))
            let b = sort(arr.slice(sl, sl*2))
            let c = sort(arr.slice(sl*2, sl*3))
            console.log(a,b,c)

            arr = []
            while (c.length > 0) {
                while (b.length > 0) {
                    while (a.length > 0) {
                        while (b.length > 0 && c.length > 0) {
                            while (a[0] < b[0] && a[0] < c[0]) {
                                console.log('a', a[0])
                                arr.push(a[0])
                                a = a.slice(1)
                            }
                            if (b[0] < c[0]) {
                                console.log('b', b[0])
                                arr.push(b[0])
                                b = b.slice(1)
                            } else {
                                console.log('c', c[0])
                                arr.push(c[0])
                                c = c.slice(1)
                            }
                            while (a[0] > b[0] && a[0] > c[0]) {
                                while (b[0] > c[0]) {
                                    console.log('c2', c[0])
                                    arr.push(c[0])
                                    c = c.slice(1)
                                }
                                console.log('b2', b[0])
                                arr.push(b[0])
                                b = b.slice(1)
                            }
                        }
                        while (a.length > 0 && (b.length > 0 || c.length > 0)) {
                            if (b.length > 0) {
                                while (a[0] > b[0]) {
                                    console.log('b3', b[0])
                                    arr.push(b[0])
                                    b = b.slice(1)
                                }
                                console.log('a2', a[0])
                                arr.push(a[0])
                                a = a.slice(1)
                            } else if (c.length > 0) {
                                while (a[0] > c[0]) {
                                    console.log('c3', c[0])
                                    arr.push(c[0])
                                    c = c.slice(1)
                                }
                                console.log('a3', a[0])
                                arr.push(a[0])
                                a = a.slice(1)
                            }
                        }
                        while (a.length > 0) {
                            console.log('a0')
                            arr.push(a[0])
                            a = a.slice(1)
                        }
                    }
                    while (b[0] > c[0]) {
                        console.log('c4', c[0])
                        arr.push(c[0])
                        c = c.slice(1)
                    }
                    if (b.length > 0) {
                        console.log('b4', b[0])
                        arr.push(b[0])
                        b = b.slice(1)
                    }
                }
                if (c.length > 0) {
                    console.log('c5', c[0])
                    arr.push(c[0])
                    c = c.slice(1)
                }
            }
            return arr
        }
    }

    function sort(arr) {
        if (arr.length === 1) {
            return arr
        } else {
            let sl = arr.length/2

            let left = sort(arr.slice(0, sl))
            let right = sort(arr.slice(sl))

            arr = []
            while (left.length > 0) {
                while (left[0] > right[0]) {
                    arr.push(right[0])
                    right = right.slice(1)
                }
                arr.push(left[0])
                left = left.slice(1)
            }
            if (right.length > 0) {
                right.forEach((el) => {
                    arr.push(el)
                })
            }
            // left.reverse() -- this way is probably more resource hungry?
            // right.reverse()
            // while (left.length > 0) {
            //     if (right.length === 0 ){
            //         left.forEach((el) => {
            //             arr.push(left.pop())
            //         })
            //     } else {
            //         left[left.length - 1] < right[right.length - 1] ? arr.push(left.pop()) : arr.push(right.pop())
            //     }
            // }
            // while (right.length > 0) { // left half empty but right half not? right must necessarily be sorted, push them in one by one until empty
            //     arr.push(right.pop())
            // }
            return arr
        }
    }
</script>
</html>